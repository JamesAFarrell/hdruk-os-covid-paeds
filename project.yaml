version: '3.0'

expectations:
  population_size: 2000

actions:

  generate_study_population:
    run: cohortextractor:latest generate_cohort --study-definition study_definition --output-format csv.gz
    outputs:
      highly_sensitive:
        cohort: output/input.csv.gz

  generate_dummy_data:
    run: r:latest analysis/01_generate_dummy_data.R
    needs: [generate_study_population]
    outputs:
      highly_sensitive:
        dummy_data_admissions: output/dummy_data/dummy_data_admissions.csv.gz
        dummy_data_outpatient: output/dummy_data/dummy_data_outpatient.csv.gz
        dummy_data_gp: output/dummy_data/dummy_data_gp.csv.gz
        dummy_data_testing_negative: output/dummy_data/dummy_data_testing_negative.csv.gz
        dummy_data_testing_positive: output/dummy_data/dummy_data_testing_positive.csv.gz

  generate_admissions:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_admissions
        --index-date-range "2018-10-01 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
    dummy_data_file: output/dummy_data/dummy_data_admissions.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_admissions: output/data_weekly/input_admissions_20*.csv.gz

  generate_outpatient:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_outpatient
        --index-date-range "2019-03-11 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_outpatient.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_outpatient: output/data_weekly/input_outpatient_20*.csv.gz

  generate_outpatient_TF_cardiology:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_outpatient_TF_cardiology
        --index-date-range "2019-03-11 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_outpatient.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_outpatient: output/data_weekly/input_outpatient_TF_cardiology_20*.csv.gz

  generate_outpatient_TF_community_paediatrics:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_outpatient_TF_community_paediatrics
        --index-date-range "2019-03-11 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_outpatient.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_outpatient: output/data_weekly/input_outpatient_TF_community_paediatrics_20*.csv.gz

  generate_outpatient_TF_dermatology:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_outpatient_TF_dermatology
        --index-date-range "2019-03-11 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_outpatient.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_outpatient: output/data_weekly/input_outpatient_TF_dermatology_20*.csv.gz

  generate_outpatient_TF_dietetics:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_outpatient_TF_dietetics
        --index-date-range "2019-03-11 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_outpatient.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_outpatient: output/data_weekly/input_outpatient_TF_dietetics_20*.csv.gz

  generate_outpatient_TF_endocrinology:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_outpatient_TF_endocrinology
        --index-date-range "2019-03-11 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_outpatient.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_outpatient: output/data_weekly/input_outpatient_TF_endocrinology_20*.csv.gz

  generate_outpatient_TF_gastrointestinal:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_outpatient_TF_gastrointestinal
        --index-date-range "2019-03-11 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_outpatient.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_outpatient: output/data_weekly/input_outpatient_TF_gastrointestinal_20*.csv.gz

  generate_outpatient_TF_general:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_outpatient_TF_general
        --index-date-range "2019-03-11 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_outpatient.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_outpatient: output/data_weekly/input_outpatient_TF_general_20*.csv.gz

  generate_outpatient_TF_haematology:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_outpatient_TF_haematology
        --index-date-range "2019-03-11 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_outpatient.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_outpatient: output/data_weekly/input_outpatient_TF_haematology_20*.csv.gz

  generate_outpatient_TF_immunology_and_allergy:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_outpatient_TF_immunology_and_allergy
        --index-date-range "2019-03-11 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_outpatient.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_outpatient: output/data_weekly/input_outpatient_TF_immunology_and_allergy_20*.csv.gz

  generate_outpatient_TF_infectious_disease:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_outpatient_TF_infectious_disease
        --index-date-range "2019-03-11 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_outpatient.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_outpatient: output/data_weekly/input_outpatient_TF_infectious_disease_20*.csv.gz

  generate_outpatient_TF_mental_health:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_outpatient_TF_mental_health
        --index-date-range "2019-03-11 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_outpatient.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_outpatient: output/data_weekly/input_outpatient_TF_mental_health_20*.csv.gz

  generate_outpatient_TF_metabolic:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_outpatient_TF_metabolic
        --index-date-range "2019-03-11 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_outpatient.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_outpatient: output/data_weekly/input_outpatient_TF_metabolic_20*.csv.gz

  generate_outpatient_TF_neurology:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_outpatient_TF_neurology
        --index-date-range "2019-03-11 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_outpatient.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_outpatient: output/data_weekly/input_outpatient_TF_neurology_20*.csv.gz

  generate_outpatient_TF_occupational_therapy:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_outpatient_TF_occupational_therapy
        --index-date-range "2019-03-11 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_outpatient.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_outpatient: output/data_weekly/input_outpatient_TF_occupational_therapy_20*.csv.gz

  generate_outpatient_TF_oncology:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_outpatient_TF_oncology
        --index-date-range "2019-03-11 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_outpatient.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_outpatient: output/data_weekly/input_outpatient_TF_oncology_20*.csv.gz

  generate_outpatient_TF_pain_management_and_palliative_care:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_outpatient_TF_pain_management_and_palliative_care
        --index-date-range "2019-03-11 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_outpatient.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_outpatient: output/data_weekly/input_outpatient_TF_pain_management_and_palliative_care_20*.csv.gz

  generate_outpatient_TF_physiology:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_outpatient_TF_physiology
        --index-date-range "2019-03-11 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_outpatient.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_outpatient: output/data_weekly/input_outpatient_TF_physiology_20*.csv.gz

  generate_outpatient_TF_physiotherapy:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_outpatient_TF_physiotherapy
        --index-date-range "2019-03-11 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_outpatient.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_outpatient: output/data_weekly/input_outpatient_TF_physiotherapy_20*.csv.gz

  generate_outpatient_TF_post_covid_clinic:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_outpatient_TF_post_covid_clinic
        --index-date-range "2019-03-11 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_outpatient.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_outpatient: output/data_weekly/input_outpatient_TF_post_covid_clinic_20*.csv.gz

  generate_outpatient_TF_rehabilitation:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_outpatient_TF_rehabilitation
        --index-date-range "2019-03-11 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_outpatient.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_outpatient: output/data_weekly/input_outpatient_TF_rehabilitation_20*.csv.gz

  generate_outpatient_TF_renal:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_outpatient_TF_renal
        --index-date-range "2019-03-11 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_outpatient.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_outpatient: output/data_weekly/input_outpatient_TF_renal_20*.csv.gz

  generate_outpatient_TF_respiratory:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_outpatient_TF_respiratory
        --index-date-range "2019-03-11 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_outpatient.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_outpatient: output/data_weekly/input_outpatient_TF_respiratory_20*.csv.gz

  generate_outpatient_TF_rheumatology:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_outpatient_TF_rheumatology
        --index-date-range "2019-03-11 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_outpatient.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_outpatient: output/data_weekly/input_outpatient_TF_rheumatology_20*.csv.gz

  generate_outpatient_TF_speech_and_language_therapy:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_outpatient_TF_speech_and_language_therapy
        --index-date-range "2019-03-11 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_outpatient.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_outpatient: output/data_weekly/input_outpatient_TF_speech_and_language_therapy_20*.csv.gz

  generate_covid_tests_negative:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_covid_tests_negative
        --index-date-range "2019-12-30 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
    dummy_data_file: output/dummy_data/dummy_data_testing_negative.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_negative_tests: output/data_weekly/input_covid_tests_negative_20*.csv.gz

  generate_covid_tests_positive:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_covid_tests_positive
        --index-date-range "2019-12-30 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
    dummy_data_file: output/dummy_data/dummy_data_testing_positive.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_positive_tests: output/data_weekly/input_covid_tests_positive_20*.csv.gz

  generate_gp_KM_auditory_system:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_KM_auditory_system
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_KM_auditory_system_20*.csv.gz

  generate_gp_KM_cardiovascular_system:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_KM_cardiovascular_system
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_KM_cardiovascular_system_20*.csv.gz

  generate_gp_KM_cellular_component_of_blood:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_KM_cellular_component_of_blood
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_KM_cellular_component_of_blood_20*.csv.gz

  generate_gp_KM_central_nervous_system:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_KM_central_nervous_system
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_KM_central_nervous_system_20*.csv.gz

  generate_gp_KM_congenital_disease:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_KM_congenital_disease
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_KM_congenital_disease_20*.csv.gz

  generate_gp_KM_connective_tissue:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_KM_connective_tissue
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_KM_connective_tissue_20*.csv.gz

  generate_gp_KM_digestive_system:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_KM_digestive_system
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_KM_digestive_system_20*.csv.gz

  generate_gp_KM_endocrine_system:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_KM_endocrine_system
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_KM_endocrine_system_20*.csv.gz

  generate_gp_KM_fetus_newborn:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_KM_fetus_newborn
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_KM_fetus_newborn_20*.csv.gz

  generate_gp_KM_genitourinary_system:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_KM_genitourinary_system
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_KM_genitourinary_system_20*.csv.gz

  generate_gp_KM_hematopoietic_structure:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_KM_hematopoietic_structure
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_KM_hematopoietic_structure_20*.csv.gz

  generate_gp_KM_immune_function:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_KM_immune_function
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_KM_immune_function_20*.csv.gz

  generate_gp_KM_infectious_disease:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_KM_infectious_disease
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_KM_infectious_disease_20*.csv.gz

  generate_gp_KM_labor_delivery:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_KM_labor_delivery
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_KM_labor_delivery_20*.csv.gz

  generate_gp_KM_mental_disorder:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_KM_mental_disorder
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_KM_mental_disorder_20*.csv.gz

  generate_gp_KM_metabolic_disease:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_KM_metabolic_disease
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_KM_metabolic_disease_20*.csv.gz

  generate_gp_KM_musculoskeletal_system:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_KM_musculoskeletal_system
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_KM_musculoskeletal_system_20*.csv.gz

  generate_gp_KM_neoplastic_disease:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_KM_neoplastic_disease
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_KM_neoplastic_disease_20*.csv.gz

  generate_gp_KM_nervous_system:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_KM_nervous_system
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_KM_nervous_system_20*.csv.gz

  generate_gp_KM_nutritional_disorder:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_KM_nutritional_disorder
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_KM_nutritional_disorder_20*.csv.gz

  generate_gp_KM_poisoning:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_KM_poisoning
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_KM_poisoning_20*.csv.gz

  generate_gp_KM_pregnancy_childbirth:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_KM_pregnancy_childbirth
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_KM_pregnancy_childbirth_20*.csv.gz

  generate_gp_KM_puerperium:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_KM_puerperium
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_KM_puerperium_20*.csv.gz

  generate_gp_KM_respiratory_system:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_KM_respiratory_system
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_KM_respiratory_system_20*.csv.gz

  generate_gp_KM_self_harm:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_KM_self_harm
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_KM_self_harm_20*.csv.gz

  generate_gp_KM_skin_subcutaneous_tissue:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_KM_skin_subcutaneous_tissue
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_KM_skin_subcutaneous_tissue_20*.csv.gz

  generate_gp_KM_traumatic_injury:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_KM_traumatic_injury
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_KM_traumatic_injury_20*.csv.gz

  generate_gp_KM_visual_system:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_KM_visual_system
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_KM_visual_system_20*.csv.gz

  generate_gp_mapped_0_occupations:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_mapped_0_occupations
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_mapped_0_occupations_20*.csv.gz

  generate_gp_mapped_1_history_symptoms:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_mapped_1_history_symptoms
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_mapped_1_history_symptoms_20*.csv.gz

  generate_gp_mapped_2_examination_signs:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_mapped_2_examination_signs
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_mapped_2_examination_signs_20*.csv.gz

  generate_gp_mapped_3_diagnostic_procedures:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_mapped_3_diagnostic_procedures
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_mapped_3_diagnostic_procedures_20*.csv.gz

  generate_gp_mapped_4_laboratory_procedures:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_mapped_4_laboratory_procedures
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_mapped_4_laboratory_procedures_20*.csv.gz

  generate_gp_mapped_5_radiology_physics_in_medicine:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_mapped_5_radiology_physics_in_medicine
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_mapped_5_radiology_physics_in_medicine_20*.csv.gz

  generate_gp_mapped_6_preventive_procedures:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_mapped_6_preventive_procedures
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_mapped_6_preventive_procedures_20*.csv.gz

  generate_gp_mapped_7_operations_procedures_sites:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_mapped_7_operations_procedures_sites
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_mapped_7_operations_procedures_sites_20*.csv.gz

  generate_gp_mapped_8_other_therapeutic_procedures:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_mapped_8_other_therapeutic_procedures
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_mapped_8_other_therapeutic_procedures_20*.csv.gz

  generate_gp_mapped_9_administration:
    run: >
      cohortextractor:latest generate_cohort
        --study-definition study_definition_gp_mapped_9_administration
        --index-date-range "2018-12-31 to 2022-05-02 by week"
        --output-format csv.gz
        --output-dir=output/data_weekly
        --with-end-date-fix
    dummy_data_file: output/dummy_data/dummy_data_gp.csv.gz
    needs: [generate_dummy_data]
    outputs:
      highly_sensitive:
        data_gp_contacts: output/data_weekly/input_gp_mapped_9_administration_20*.csv.gz

  process_patient_ids:
    run: r:latest analysis/02_process_patient_ids.R
    needs: [generate_study_population]
    outputs:
      highly_sensitive:
        data_id: output/data/data_id.rds

  process_admissions_data:
    run: r:latest analysis/02_process_admissions_data.R
    needs: [generate_admissions, process_patient_ids]
    outputs:
      highly_sensitive:
        data_admissions: output/data/data_admissions.rds
      moderately_sensitive:
        diagnostics_admissions: output/diagnostics/diagnostics_admissions.csv

  process_gp_data:
    run: r:latest analysis/02_process_gp_data.R
    needs: [generate_gp_KM_auditory_system, generate_gp_KM_cardiovascular_system,
            generate_gp_KM_cellular_component_of_blood, generate_gp_KM_central_nervous_system,
            generate_gp_KM_congenital_disease, generate_gp_KM_connective_tissue,
            generate_gp_KM_digestive_system, generate_gp_KM_endocrine_system,
            generate_gp_KM_fetus_newborn, generate_gp_KM_genitourinary_system,
            generate_gp_KM_hematopoietic_structure, generate_gp_KM_immune_function,
            generate_gp_KM_infectious_disease, generate_gp_KM_labor_delivery,
            generate_gp_KM_mental_disorder, generate_gp_KM_metabolic_disease,
            generate_gp_KM_musculoskeletal_system, generate_gp_KM_neoplastic_disease,
            generate_gp_KM_nervous_system, generate_gp_KM_nutritional_disorder,
            generate_gp_KM_poisoning, generate_gp_KM_pregnancy_childbirth,
            generate_gp_KM_puerperium, generate_gp_KM_respiratory_system, generate_gp_KM_self_harm,
            generate_gp_KM_skin_subcutaneous_tissue, generate_gp_KM_traumatic_injury,
            generate_gp_KM_visual_system, 
            generate_gp_mapped_0_occupations, generate_gp_mapped_1_history_symptoms,
            generate_gp_mapped_2_examination_signs, generate_gp_mapped_3_diagnostic_procedures,
            generate_gp_mapped_4_laboratory_procedures, generate_gp_mapped_5_radiology_physics_in_medicine,
            generate_gp_mapped_6_preventive_procedures, generate_gp_mapped_7_operations_procedures_sites,
            generate_gp_mapped_8_other_therapeutic_procedures, generate_gp_mapped_9_administration,
            process_patient_ids]
    outputs:
      highly_sensitive:
        data_gp: output/data/data_gp.rds
      moderately_sensitive:
        diagnostics_gp: output/diagnostics/diagnostics_gp.csv

  process_outpatient_data:
    run: r:latest analysis/02_process_outpatient_data.R
    needs: [generate_outpatient,
            generate_outpatient_TF_cardiology, generate_outpatient_TF_community_paediatrics,
            generate_outpatient_TF_dermatology, generate_outpatient_TF_dietetics,
            generate_outpatient_TF_endocrinology, generate_outpatient_TF_gastrointestinal,
            generate_outpatient_TF_general, generate_outpatient_TF_haematology,
            generate_outpatient_TF_immunology_and_allergy, generate_outpatient_TF_infectious_disease,
            generate_outpatient_TF_mental_health, generate_outpatient_TF_metabolic,
            generate_outpatient_TF_neurology, generate_outpatient_TF_occupational_therapy,
            generate_outpatient_TF_oncology, generate_outpatient_TF_pain_management_and_palliative_care,
            generate_outpatient_TF_physiology, generate_outpatient_TF_physiotherapy,
            generate_outpatient_TF_post_covid_clinic, generate_outpatient_TF_rehabilitation,
            generate_outpatient_TF_renal, generate_outpatient_TF_respiratory,
            generate_outpatient_TF_rheumatology, generate_outpatient_TF_speech_and_language_therapy,
            process_patient_ids]
    outputs:
      highly_sensitive:
        data_outpatient: output/data/data_outpatient.rds
      moderately_sensitive:
        diagnostics_outpatient: output/diagnostics/diagnostics_outpatient.csv

  process_testing_data:
    run: r:latest analysis/02_process_testing_data.R
    needs: [generate_covid_tests_negative, generate_covid_tests_positive, process_patient_ids]
    outputs:
      highly_sensitive:
        data_testing: output/data/data_testing.rds
      moderately_sensitive:
        diagnostics_testing: output/diagnostics/diagnostics_testing.csv

  process_patient_data:
    run: r:latest analysis/02_process_patient_data.R
    needs: [generate_study_population, process_admissions_data, process_testing_data]
    outputs:
      highly_sensitive:
        data_patient: output/data/data_patient.rds

  summarise_datasets:
    run: r:latest analysis/03_summary_datasets.R
    needs: [process_patient_data, process_testing_data, process_admissions_data, process_outpatient_data, process_gp_data]
    outputs:
      moderately_sensitive:
        summary_datasets_tables: output/descriptives/summary_datasets/*.csv
        summary_datasets_plots: output/descriptives/summary_datasets/*.jpeg

  construct_yearly_cohort:
    run: r:latest analysis/05_construct_yearly_cohort.R
    needs: [process_patient_data]
    outputs:
      highly_sensitive:
        data_patient: output/data/data_cohort.rds
      moderately_sensitive:
        cohort_summary: output/descriptives/healthcare_use_2019_2022/tbl_cohort_summary.csv
        inclusion_flowchart: output/descriptives/healthcare_use_2019_2022/tbl_flowchart.csv

  monthly_gp_all_overall:
    run: r:latest analysis/05_monthly_resource_use.R gp all overall
    needs: [construct_yearly_cohort, process_gp_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_gp_all_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_gp_all_overall.jpeg

  monthly_gp_all_age_group:
    run: r:latest analysis/05_monthly_resource_use.R gp all age_group
    needs: [construct_yearly_cohort, process_gp_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_gp_all_age_group.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_gp_all_age_group.jpeg

  monthly_gp_all_covid_status_tp:
    run: r:latest analysis/05_monthly_resource_use.R gp all covid_status_tp
    needs: [construct_yearly_cohort, process_gp_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_gp_all_covid_status_tp.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_gp_all_covid_status_tp.jpeg

  monthly_gp_auditory_system_overall:
    run: r:latest analysis/05_monthly_resource_use.R gp auditory_system overall
    needs: [construct_yearly_cohort, process_gp_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_gp_auditory_system_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_gp_auditory_system_overall.jpeg

  monthly_gp_cardiovascular_system_overall:
    run: r:latest analysis/05_monthly_resource_use.R gp cardiovascular_system overall
    needs: [construct_yearly_cohort, process_gp_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_gp_cardiovascular_system_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_gp_cardiovascular_system_overall.jpeg

  monthly_gp_cellular_component_of_blood_overall:
    run: r:latest analysis/05_monthly_resource_use.R gp cellular_component_of_blood overall
    needs: [construct_yearly_cohort, process_gp_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_gp_cellular_component_of_blood_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_gp_cellular_component_of_blood_overall.jpeg

  monthly_gp_central_nervous_system_overall:
    run: r:latest analysis/05_monthly_resource_use.R gp central_nervous_system overall
    needs: [construct_yearly_cohort, process_gp_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_gp_central_nervous_system_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_gp_central_nervous_system_overall.jpeg

  monthly_gp_congenital_disease_overall:
    run: r:latest analysis/05_monthly_resource_use.R gp congenital_disease overall
    needs: [construct_yearly_cohort, process_gp_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_gp_congenital_disease_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_gp_congenital_disease_overall.jpeg

  monthly_gp_connective_tissue_overall:
    run: r:latest analysis/05_monthly_resource_use.R gp connective_tissue overall
    needs: [construct_yearly_cohort, process_gp_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_gp_connective_tissue_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_gp_connective_tissue_overall.jpeg

  monthly_gp_digestive_system_overall:
    run: r:latest analysis/05_monthly_resource_use.R gp digestive_system overall
    needs: [construct_yearly_cohort, process_gp_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_gp_digestive_system_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_gp_digestive_system_overall.jpeg

  monthly_gp_endocrine_system_overall:
    run: r:latest analysis/05_monthly_resource_use.R gp endocrine_system overall
    needs: [construct_yearly_cohort, process_gp_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_gp_endocrine_system_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_gp_endocrine_system_overall.jpeg

  monthly_gp_fetus_newborn_overall:
    run: r:latest analysis/05_monthly_resource_use.R gp fetus_newborn overall
    needs: [construct_yearly_cohort, process_gp_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_gp_fetus_newborn_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_gp_fetus_newborn_overall.jpeg

  monthly_gp_genitourinary_system_overall:
    run: r:latest analysis/05_monthly_resource_use.R gp genitourinary_system overall
    needs: [construct_yearly_cohort, process_gp_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_gp_genitourinary_system_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_gp_genitourinary_system_overall.jpeg

  monthly_gp_hematopoietic_structure_overall:
    run: r:latest analysis/05_monthly_resource_use.R gp hematopoietic_structure overall
    needs: [construct_yearly_cohort, process_gp_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_gp_hematopoietic_structure_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_gp_hematopoietic_structure_overall.jpeg

  monthly_gp_immune_function_overall:
    run: r:latest analysis/05_monthly_resource_use.R gp immune_function overall
    needs: [construct_yearly_cohort, process_gp_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_gp_immune_function_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_gp_immune_function_overall.jpeg

  monthly_gp_infectious_disease_overall:
    run: r:latest analysis/05_monthly_resource_use.R gp infectious_disease overall
    needs: [construct_yearly_cohort, process_gp_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_gp_infectious_disease_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_gp_infectious_disease_overall.jpeg

  monthly_gp_labor_delivery_overall:
    run: r:latest analysis/05_monthly_resource_use.R gp labor_delivery overall
    needs: [construct_yearly_cohort, process_gp_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_gp_labor_delivery_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_gp_labor_delivery_overall.jpeg

  monthly_gp_mental_disorder_overall:
    run: r:latest analysis/05_monthly_resource_use.R gp mental_disorder overall
    needs: [construct_yearly_cohort, process_gp_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_gp_mental_disorder_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_gp_mental_disorder_overall.jpeg

  monthly_gp_mental_disorder_age_group:
    run: r:latest analysis/05_monthly_resource_use.R gp mental_disorder age_group
    needs: [construct_yearly_cohort, process_gp_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_gp_mental_disorder_age_group.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_gp_mental_disorder_age_group.jpeg

  monthly_gp_metabolic_disease_overall:
    run: r:latest analysis/05_monthly_resource_use.R gp metabolic_disease overall
    needs: [construct_yearly_cohort, process_gp_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_gp_metabolic_disease_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_gp_metabolic_disease_overall.jpeg

  monthly_gp_musculoskeletal_system_overall:
    run: r:latest analysis/05_monthly_resource_use.R gp musculoskeletal_system overall
    needs: [construct_yearly_cohort, process_gp_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_gp_musculoskeletal_system_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_gp_musculoskeletal_system_overall.jpeg

  monthly_gp_neoplastic_disease_overall:
    run: r:latest analysis/05_monthly_resource_use.R gp neoplastic_disease overall
    needs: [construct_yearly_cohort, process_gp_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_gp_neoplastic_disease_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_gp_neoplastic_disease_overall.jpeg

  monthly_gp_nervous_system_overall:
    run: r:latest analysis/05_monthly_resource_use.R gp nervous_system overall
    needs: [construct_yearly_cohort, process_gp_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_gp_nervous_system_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_gp_nervous_system_overall.jpeg

  monthly_gp_nutritional_disorder_overall:
    run: r:latest analysis/05_monthly_resource_use.R gp nutritional_disorder overall
    needs: [construct_yearly_cohort, process_gp_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_gp_nutritional_disorder_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_gp_nutritional_disorder_overall.jpeg

  monthly_gp_poisoning_overall:
    run: r:latest analysis/05_monthly_resource_use.R gp poisoning overall
    needs: [construct_yearly_cohort, process_gp_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_gp_poisoning_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_gp_poisoning_overall.jpeg

  monthly_gp_pregnancy_childbirth_overall:
    run: r:latest analysis/05_monthly_resource_use.R gp pregnancy_childbirth overall
    needs: [construct_yearly_cohort, process_gp_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_gp_pregnancy_childbirth_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_gp_pregnancy_childbirth_overall.jpeg

  monthly_gp_puerperium_overall:
    run: r:latest analysis/05_monthly_resource_use.R gp puerperium overall
    needs: [construct_yearly_cohort, process_gp_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_gp_puerperium_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_gp_puerperium_overall.jpeg

  monthly_gp_respiratory_system_overall:
    run: r:latest analysis/05_monthly_resource_use.R gp respiratory_system overall
    needs: [construct_yearly_cohort, process_gp_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_gp_respiratory_system_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_gp_respiratory_system_overall.jpeg

  monthly_gp_skin_subcutaneous_tissue_overall:
    run: r:latest analysis/05_monthly_resource_use.R gp skin_subcutaneous_tissue overall
    needs: [construct_yearly_cohort, process_gp_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_gp_skin_subcutaneous_tissue_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_gp_skin_subcutaneous_tissue_overall.jpeg

  monthly_gp_traumatic_injury_overall:
    run: r:latest analysis/05_monthly_resource_use.R gp traumatic_injury overall
    needs: [construct_yearly_cohort, process_gp_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_gp_traumatic_injury_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_gp_traumatic_injury_overall.jpeg

  monthly_gp_visual_system_overall:
    run: r:latest analysis/05_monthly_resource_use.R gp visual_system overall
    needs: [construct_yearly_cohort, process_gp_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_gp_visual_system_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_gp_visual_system_overall.jpeg

  monthly_outpatient_all_overall:
    run: r:latest analysis/05_monthly_resource_use.R outpatient all overall
    needs: [construct_yearly_cohort, process_outpatient_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_outpatient_all_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_outpatient_all_overall.jpeg

  monthly_outpatient_all_age_group:
    run: r:latest analysis/05_monthly_resource_use.R outpatient all age_group
    needs: [construct_yearly_cohort, process_outpatient_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_outpatient_all_age_group.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_outpatient_all_age_group.jpeg

  monthly_outpatient_all_covid_status_tp:
    run: r:latest analysis/05_monthly_resource_use.R outpatient all covid_status_tp
    needs: [construct_yearly_cohort, process_outpatient_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_outpatient_all_covid_status_tp.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_outpatient_all_covid_status_tp.jpeg

  monthly_outpatient_cardiology_overall:
    run: r:latest analysis/05_monthly_resource_use.R outpatient cardiology overall
    needs: [construct_yearly_cohort, process_outpatient_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_outpatient_cardiology_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_outpatient_cardiology_overall.jpeg

  monthly_outpatient_community_paediatrics_overall:
    run: r:latest analysis/05_monthly_resource_use.R outpatient community_paediatrics overall
    needs: [construct_yearly_cohort, process_outpatient_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_outpatient_community_paediatrics_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_outpatient_community_paediatrics_overall.jpeg

  monthly_outpatient_dermatology_overall:
    run: r:latest analysis/05_monthly_resource_use.R outpatient dermatology overall
    needs: [construct_yearly_cohort, process_outpatient_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_outpatient_dermatology_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_outpatient_dermatology_overall.jpeg

  monthly_outpatient_dietetics_overall:
    run: r:latest analysis/05_monthly_resource_use.R outpatient dietetics overall
    needs: [construct_yearly_cohort, process_outpatient_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_outpatient_dietetics_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_outpatient_dietetics_overall.jpeg

  monthly_outpatient_endocrinology_overall:
    run: r:latest analysis/05_monthly_resource_use.R outpatient endocrinology overall
    needs: [construct_yearly_cohort, process_outpatient_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_outpatient_endocrinology_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_outpatient_endocrinology_overall.jpeg

  monthly_outpatient_gastrointestinal_overall:
    run: r:latest analysis/05_monthly_resource_use.R outpatient gastrointestinal overall
    needs: [construct_yearly_cohort, process_outpatient_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_outpatient_gastrointestinal_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_outpatient_gastrointestinal_overall.jpeg

  monthly_outpatient_general_overall:
    run: r:latest analysis/05_monthly_resource_use.R outpatient general overall
    needs: [construct_yearly_cohort, process_outpatient_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_outpatient_general_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_outpatient_general_overall.jpeg

  monthly_outpatient_haematology_overall:
    run: r:latest analysis/05_monthly_resource_use.R outpatient haematology overall
    needs: [construct_yearly_cohort, process_outpatient_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_outpatient_haematology_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_outpatient_haematology_overall.jpeg

  monthly_outpatient_immunology_and_allergy_overall:
    run: r:latest analysis/05_monthly_resource_use.R outpatient immunology_and_allergy overall
    needs: [construct_yearly_cohort, process_outpatient_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_outpatient_immunology_and_allergy_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_outpatient_immunology_and_allergy_overall.jpeg

  monthly_outpatient_infectious_disease_overall:
    run: r:latest analysis/05_monthly_resource_use.R outpatient infectious_disease overall
    needs: [construct_yearly_cohort, process_outpatient_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_outpatient_infectious_disease_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_outpatient_infectious_disease_overall.jpeg

  monthly_outpatient_mental_health_overall:
    run: r:latest analysis/05_monthly_resource_use.R outpatient mental_health overall
    needs: [construct_yearly_cohort, process_outpatient_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_outpatient_mental_health_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_outpatient_mental_health_overall.jpeg

  monthly_outpatient_mental_health_age_group:
    run: r:latest analysis/05_monthly_resource_use.R outpatient mental_health age_group
    needs: [construct_yearly_cohort, process_outpatient_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_outpatient_mental_health_age_group.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_outpatient_mental_health_age_group.jpeg

  monthly_outpatient_metabolic_overall:
    run: r:latest analysis/05_monthly_resource_use.R outpatient metabolic overall
    needs: [construct_yearly_cohort, process_outpatient_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_outpatient_metabolic_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_outpatient_metabolic_overall.jpeg

  monthly_outpatient_neurology_overall:
    run: r:latest analysis/05_monthly_resource_use.R outpatient neurology overall
    needs: [construct_yearly_cohort, process_outpatient_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_outpatient_neurology_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_outpatient_neurology_overall.jpeg

  monthly_outpatient_occupational_therapy_overall:
    run: r:latest analysis/05_monthly_resource_use.R outpatient occupational_therapy overall
    needs: [construct_yearly_cohort, process_outpatient_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_outpatient_occupational_therapy_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_outpatient_occupational_therapy_overall.jpeg

  monthly_outpatient_oncology_overall:
    run: r:latest analysis/05_monthly_resource_use.R outpatient oncology overall
    needs: [construct_yearly_cohort, process_outpatient_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_outpatient_oncology_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_outpatient_oncology_overall.jpeg

  monthly_outpatient_pain_management_and_palliative_care_overall:
    run: r:latest analysis/05_monthly_resource_use.R outpatient pain_management_and_palliative_care overall
    needs: [construct_yearly_cohort, process_outpatient_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_outpatient_pain_management_and_palliative_care_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_outpatient_pain_management_and_palliative_care_overall.jpeg

  monthly_outpatient_physiology_overall:
    run: r:latest analysis/05_monthly_resource_use.R outpatient physiology overall
    needs: [construct_yearly_cohort, process_outpatient_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_outpatient_physiology_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_outpatient_physiology_overall.jpeg

  monthly_outpatient_physiotherapy_overall:
    run: r:latest analysis/05_monthly_resource_use.R outpatient physiotherapy overall
    needs: [construct_yearly_cohort, process_outpatient_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_outpatient_physiotherapy_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_outpatient_physiotherapy_overall.jpeg

  monthly_outpatient_post_covid_clinic_overall:
    run: r:latest analysis/05_monthly_resource_use.R outpatient post_covid_clinic overall
    needs: [construct_yearly_cohort, process_outpatient_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_outpatient_post_covid_clinic_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_outpatient_post_covid_clinic_overall.jpeg

  monthly_outpatient_rehabilitation_overall:
    run: r:latest analysis/05_monthly_resource_use.R outpatient rehabilitation overall
    needs: [construct_yearly_cohort, process_outpatient_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_outpatient_rehabilitation_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_outpatient_rehabilitation_overall.jpeg

  monthly_outpatient_renal_overall:
    run: r:latest analysis/05_monthly_resource_use.R outpatient renal overall
    needs: [construct_yearly_cohort, process_outpatient_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_outpatient_renal_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_outpatient_renal_overall.jpeg

  monthly_outpatient_respiratory_overall:
    run: r:latest analysis/05_monthly_resource_use.R outpatient respiratory overall
    needs: [construct_yearly_cohort, process_outpatient_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_outpatient_respiratory_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_outpatient_respiratory_overall.jpeg

  monthly_outpatient_rheumatology_overall:
    run: r:latest analysis/05_monthly_resource_use.R outpatient rheumatology overall
    needs: [construct_yearly_cohort, process_outpatient_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_outpatient_rheumatology_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_outpatient_rheumatology_overall.jpeg

  monthly_outpatient_speech_and_language_therapy_overall:
    run: r:latest analysis/05_monthly_resource_use.R outpatient speech_and_language_therapy overall
    needs: [construct_yearly_cohort, process_outpatient_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_outpatient_speech_and_language_therapy_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_outpatient_speech_and_language_therapy_overall.jpeg

  monthly_admissions_all_overall:
    run: r:latest analysis/05_monthly_resource_use.R admissions all overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_admissions_all_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_admissions_all_overall.jpeg

  monthly_admissions_all_age_group:
    run: r:latest analysis/05_monthly_resource_use.R admissions all age_group
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_admissions_all_age_group.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_admissions_all_age_group.jpeg

  monthly_admissions_all_covid_status_tp:
    run: r:latest analysis/05_monthly_resource_use.R admissions all covid_status_tp
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_admissions_all_covid_status_tp.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_admissions_all_covid_status_tp.jpeg

  monthly_admissions_01_infectious_and_parasitic_diseases_overall:
    run: r:latest analysis/05_monthly_resource_use.R admissions 01_infectious_and_parasitic_diseases overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_admissions_01_infectious_and_parasitic_diseases_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_admissions_01_infectious_and_parasitic_diseases_overall.jpeg

  monthly_admissions_02_neoplasms_overall:
    run: r:latest analysis/05_monthly_resource_use.R admissions 02_neoplasms overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_admissions_02_neoplasms_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_admissions_02_neoplasms_overall.jpeg

  monthly_admissions_03_diseases_of_the_blood_overall:
    run: r:latest analysis/05_monthly_resource_use.R admissions 03_diseases_of_the_blood overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_admissions_03_diseases_of_the_blood_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_admissions_03_diseases_of_the_blood_overall.jpeg

  monthly_admissions_04_endocrine_nutritional_and_metabolic_overall:
    run: r:latest analysis/05_monthly_resource_use.R admissions 04_endocrine_nutritional_and_metabolic overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_admissions_04_endocrine_nutritional_and_metabolic_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_admissions_04_endocrine_nutritional_and_metabolic_overall.jpeg

  monthly_admissions_05_mental_and_behavioural_disorders_overall:
    run: r:latest analysis/05_monthly_resource_use.R admissions 05_mental_and_behavioural_disorders overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_admissions_05_mental_and_behavioural_disorders_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_admissions_05_mental_and_behavioural_disorders_overall.jpeg

  monthly_admissions_05_mental_and_behavioural_disorders_age_group:
    run: r:latest analysis/05_monthly_resource_use.R admissions 05_mental_and_behavioural_disorders age_group
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_admissions_05_mental_and_behavioural_disorders_age_group.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_admissions_05_mental_and_behavioural_disorders_age_group.jpeg

  monthly_admissions_06_nervous_system_overall:
    run: r:latest analysis/05_monthly_resource_use.R admissions 06_nervous_system overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_admissions_06_nervous_system_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_admissions_06_nervous_system_overall.jpeg

  monthly_admissions_07_eye_and_adnexa_overall:
    run: r:latest analysis/05_monthly_resource_use.R admissions 07_eye_and_adnexa overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_admissions_07_eye_and_adnexa_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_admissions_07_eye_and_adnexa_overall.jpeg

  monthly_admissions_08_ear_and_mastoid_process_overall:
    run: r:latest analysis/05_monthly_resource_use.R admissions 08_ear_and_mastoid_process overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_admissions_08_ear_and_mastoid_process_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_admissions_08_ear_and_mastoid_process_overall.jpeg

  monthly_admissions_09_circulatory_system_overall:
    run: r:latest analysis/05_monthly_resource_use.R admissions 09_circulatory_system overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_admissions_09_circulatory_system_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_admissions_09_circulatory_system_overall.jpeg

  monthly_admissions_10_respiratory_system_overall:
    run: r:latest analysis/05_monthly_resource_use.R admissions 10_respiratory_system overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_admissions_10_respiratory_system_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_admissions_10_respiratory_system_overall.jpeg

  monthly_admissions_11_digestive_system_overall:
    run: r:latest analysis/05_monthly_resource_use.R admissions 11_digestive_system overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_admissions_11_digestive_system_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_admissions_11_digestive_system_overall.jpeg

  monthly_admissions_12_skin_and_subcutaneous_tissue_overall:
    run: r:latest analysis/05_monthly_resource_use.R admissions 12_skin_and_subcutaneous_tissue overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_admissions_12_skin_and_subcutaneous_tissue_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_admissions_12_skin_and_subcutaneous_tissue_overall.jpeg

  monthly_admissions_13_musculoskeletal_and_connective_tissue_overall:
    run: r:latest analysis/05_monthly_resource_use.R admissions 13_musculoskeletal_and_connective_tissue overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_admissions_13_musculoskeletal_and_connective_tissue_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_admissions_13_musculoskeletal_and_connective_tissue_overall.jpeg

  monthly_admissions_14_genitourinary_system_overall:
    run: r:latest analysis/05_monthly_resource_use.R admissions 14_genitourinary_system overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_admissions_14_genitourinary_system_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_admissions_14_genitourinary_system_overall.jpeg

  monthly_admissions_15_pregnancy_childbirth_and_the_puerperium_overall:
    run: r:latest analysis/05_monthly_resource_use.R admissions 15_pregnancy_childbirth_and_the_puerperium overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_admissions_15_pregnancy_childbirth_and_the_puerperium_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_admissions_15_pregnancy_childbirth_and_the_puerperium_overall.jpeg

  monthly_admissions_16_conditions_in_the_perinatal_period_overall:
    run: r:latest analysis/05_monthly_resource_use.R admissions 16_conditions_in_the_perinatal_period overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_admissions_16_conditions_in_the_perinatal_period_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_admissions_16_conditions_in_the_perinatal_period_overall.jpeg

  monthly_admissions_17_congenital_malformations_overall:
    run: r:latest analysis/05_monthly_resource_use.R admissions 17_congenital_malformations overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_admissions_17_congenital_malformations_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_admissions_17_congenital_malformations_overall.jpeg

  monthly_admissions_18_abnormal_clinical_and_laboratory_findings_overall:
    run: r:latest analysis/05_monthly_resource_use.R admissions 18_abnormal_clinical_and_laboratory_findings overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_admissions_18_abnormal_clinical_and_laboratory_findings_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_admissions_18_abnormal_clinical_and_laboratory_findings_overall.jpeg

  monthly_admissions_19_injury_and_poisoning_excluding_poisoning_by_drugs_overall:
    run: r:latest analysis/05_monthly_resource_use.R admissions 19_injury_and_poisoning_excluding_poisoning_by_drugs overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_admissions_19_injury_and_poisoning_excluding_poisoning_by_drugs_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_admissions_19_injury_and_poisoning_excluding_poisoning_by_drugs_overall.jpeg

  monthly_admissions_20_external_causes_excluding_self_harm_overall:
    run: r:latest analysis/05_monthly_resource_use.R admissions 20_external_causes_excluding_self_harm overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_admissions_20_external_causes_excluding_self_harm_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_admissions_20_external_causes_excluding_self_harm_overall.jpeg

  monthly_admissions_21_factors_influencing_health_status_overall:
    run: r:latest analysis/05_monthly_resource_use.R admissions 21_factors_influencing_health_status overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_admissions_21_factors_influencing_health_status_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_admissions_21_factors_influencing_health_status_overall.jpeg

  monthly_admissions_22_codes_for_special_purposes_overall:
    run: r:latest analysis/05_monthly_resource_use.R admissions 22_codes_for_special_purposes overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_admissions_22_codes_for_special_purposes_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_admissions_22_codes_for_special_purposes_overall.jpeg

  monthly_admissions_23_self_harm_and_poisoning_by_drugs_overall:
    run: r:latest analysis/05_monthly_resource_use.R admissions 23_self_harm_and_poisoning_by_drugs overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_admissions_23_self_harm_and_poisoning_by_drugs_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_admissions_23_self_harm_and_poisoning_by_drugs_overall.jpeg

  monthly_beddays_all_overall:
    run: r:latest analysis/05_monthly_resource_use.R beddays all overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_beddays_all_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_beddays_all_overall.jpeg

  monthly_beddays_all_age_group:
    run: r:latest analysis/05_monthly_resource_use.R beddays all age_group
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_beddays_all_age_group.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_beddays_all_age_group.jpeg

  monthly_beddays_all_covid_status_tp:
    run: r:latest analysis/05_monthly_resource_use.R beddays all covid_status_tp
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_beddays_all_covid_status_tp.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_beddays_all_covid_status_tp.jpeg

  monthly_beddays_01_infectious_and_parasitic_diseases_overall:
    run: r:latest analysis/05_monthly_resource_use.R beddays 01_infectious_and_parasitic_diseases overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_beddays_01_infectious_and_parasitic_diseases_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_beddays_01_infectious_and_parasitic_diseases_overall.jpeg

  monthly_beddays_02_neoplasms_overall:
    run: r:latest analysis/05_monthly_resource_use.R beddays 02_neoplasms overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_beddays_02_neoplasms_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_beddays_02_neoplasms_overall.jpeg

  monthly_beddays_03_diseases_of_the_blood_overall:
    run: r:latest analysis/05_monthly_resource_use.R beddays 03_diseases_of_the_blood overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_beddays_03_diseases_of_the_blood_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_beddays_03_diseases_of_the_blood_overall.jpeg

  monthly_beddays_04_endocrine_nutritional_and_metabolic_overall:
    run: r:latest analysis/05_monthly_resource_use.R beddays 04_endocrine_nutritional_and_metabolic overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_beddays_04_endocrine_nutritional_and_metabolic_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_beddays_04_endocrine_nutritional_and_metabolic_overall.jpeg

  monthly_beddays_05_mental_and_behavioural_disorders_overall:
    run: r:latest analysis/05_monthly_resource_use.R beddays 05_mental_and_behavioural_disorders overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_beddays_05_mental_and_behavioural_disorders_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_beddays_05_mental_and_behavioural_disorders_overall.jpeg

  monthly_beddays_05_mental_and_behavioural_disorders_age_group:
    run: r:latest analysis/05_monthly_resource_use.R beddays 05_mental_and_behavioural_disorders age_group
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_beddays_05_mental_and_behavioural_disorders_age_group.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_beddays_05_mental_and_behavioural_disorders_age_group.jpeg

  monthly_beddays_06_nervous_system_overall:
    run: r:latest analysis/05_monthly_resource_use.R beddays 06_nervous_system overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_beddays_06_nervous_system_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_beddays_06_nervous_system_overall.jpeg

  monthly_beddays_07_eye_and_adnexa_overall:
    run: r:latest analysis/05_monthly_resource_use.R beddays 07_eye_and_adnexa overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_beddays_07_eye_and_adnexa_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_beddays_07_eye_and_adnexa_overall.jpeg

  monthly_beddays_08_ear_and_mastoid_process_overall:
    run: r:latest analysis/05_monthly_resource_use.R beddays 08_ear_and_mastoid_process overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_beddays_08_ear_and_mastoid_process_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_beddays_08_ear_and_mastoid_process_overall.jpeg

  monthly_beddays_09_circulatory_system_overall:
    run: r:latest analysis/05_monthly_resource_use.R beddays 09_circulatory_system overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_beddays_09_circulatory_system_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_beddays_09_circulatory_system_overall.jpeg

  monthly_beddays_10_respiratory_system_overall:
    run: r:latest analysis/05_monthly_resource_use.R beddays 10_respiratory_system overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_beddays_10_respiratory_system_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_beddays_10_respiratory_system_overall.jpeg

  monthly_beddays_11_digestive_system_overall:
    run: r:latest analysis/05_monthly_resource_use.R beddays 11_digestive_system overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_beddays_11_digestive_system_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_beddays_11_digestive_system_overall.jpeg

  monthly_beddays_12_skin_and_subcutaneous_tissue_overall:
    run: r:latest analysis/05_monthly_resource_use.R beddays 12_skin_and_subcutaneous_tissue overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_beddays_12_skin_and_subcutaneous_tissue_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_beddays_12_skin_and_subcutaneous_tissue_overall.jpeg

  monthly_beddays_13_musculoskeletal_and_connective_tissue_overall:
    run: r:latest analysis/05_monthly_resource_use.R beddays 13_musculoskeletal_and_connective_tissue overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_beddays_13_musculoskeletal_and_connective_tissue_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_beddays_13_musculoskeletal_and_connective_tissue_overall.jpeg

  monthly_beddays_14_genitourinary_system_overall:
    run: r:latest analysis/05_monthly_resource_use.R beddays 14_genitourinary_system overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_beddays_14_genitourinary_system_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_beddays_14_genitourinary_system_overall.jpeg

  monthly_beddays_15_pregnancy_childbirth_and_the_puerperium_overall:
    run: r:latest analysis/05_monthly_resource_use.R beddays 15_pregnancy_childbirth_and_the_puerperium overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_beddays_15_pregnancy_childbirth_and_the_puerperium_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_beddays_15_pregnancy_childbirth_and_the_puerperium_overall.jpeg

  monthly_beddays_16_conditions_in_the_perinatal_period_overall:
    run: r:latest analysis/05_monthly_resource_use.R beddays 16_conditions_in_the_perinatal_period overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_beddays_16_conditions_in_the_perinatal_period_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_beddays_16_conditions_in_the_perinatal_period_overall.jpeg

  monthly_beddays_17_congenital_malformations_overall:
    run: r:latest analysis/05_monthly_resource_use.R beddays 17_congenital_malformations overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_beddays_17_congenital_malformations_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_beddays_17_congenital_malformations_overall.jpeg

  monthly_beddays_18_abnormal_clinical_and_laboratory_findings_overall:
    run: r:latest analysis/05_monthly_resource_use.R beddays 18_abnormal_clinical_and_laboratory_findings overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_beddays_18_abnormal_clinical_and_laboratory_findings_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_beddays_18_abnormal_clinical_and_laboratory_findings_overall.jpeg

  monthly_beddays_19_injury_and_poisoning_excluding_poisoning_by_drugs_overall:
    run: r:latest analysis/05_monthly_resource_use.R beddays 19_injury_and_poisoning_excluding_poisoning_by_drugs overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_beddays_19_injury_and_poisoning_excluding_poisoning_by_drugs_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_beddays_19_injury_and_poisoning_excluding_poisoning_by_drugs_overall.jpeg

  monthly_beddays_20_external_causes_excluding_self_harm_overall:
    run: r:latest analysis/05_monthly_resource_use.R beddays 20_external_causes_excluding_self_harm overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_beddays_20_external_causes_excluding_self_harm_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_beddays_20_external_causes_excluding_self_harm_overall.jpeg

  monthly_beddays_21_factors_influencing_health_status_overall:
    run: r:latest analysis/05_monthly_resource_use.R beddays 21_factors_influencing_health_status overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_beddays_21_factors_influencing_health_status_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_beddays_21_factors_influencing_health_status_overall.jpeg

  monthly_beddays_22_codes_for_special_purposes_overall:
    run: r:latest analysis/05_monthly_resource_use.R beddays 22_codes_for_special_purposes overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_beddays_22_codes_for_special_purposes_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_beddays_22_codes_for_special_purposes_overall.jpeg

  monthly_beddays_23_self_harm_and_poisoning_by_drugs_overall:
    run: r:latest analysis/05_monthly_resource_use.R beddays 23_self_harm_and_poisoning_by_drugs overall
    needs: [construct_yearly_cohort, process_admissions_data]
    outputs:
      moderately_sensitive:
        monthly_table: output/descriptives/healthcare_use_2019_2022/tables/monthly_beddays_23_self_harm_and_poisoning_by_drugs_overall.csv
        monthly_plot: output/descriptives/healthcare_use_2019_2022/plots/monthly_beddays_23_self_harm_and_poisoning_by_drugs_overall.jpeg

  create_matched_cohort:
    run: r:latest analysis/06_matched_cohort.R
    needs: [process_patient_data, process_testing_data, process_admissions_data]
    outputs:
      highly_sensitive:
        data_matched: output/data/data_matched.rds
      moderately_sensitive:
        create_matched_cohort_tables: output/descriptives/matched_cohort/*.csv

  weight_matched_cohort:
    run: r:latest analysis/07_ipw.R
    needs: [process_patient_data, process_testing_data, process_admissions_data,
            process_outpatient_data, process_gp_data, create_matched_cohort]
    outputs:
      highly_sensitive:
        data_matched: output/data/data_weights.rds
      moderately_sensitive:
        summary_unweighted: output/descriptives/matched_cohort/ipw/summary_unweighted.csv
        summary_weighted: output/descriptives/matched_cohort/ipw/summary_weighted.csv
        effective_sample_size: output/descriptives/matched_cohort/ipw/table_effective_sample_size.csv
        pairwise_balance: output/descriptives/matched_cohort/ipw/table_pair_balance.csv
        balance_plots: output/descriptives/matched_cohort/ipw/balance_plot/*.jpeg
        love_plot: output/descriptives/matched_cohort/ipw/love_plot.jpeg